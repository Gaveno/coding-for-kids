# Piano Keyboard UI - Design Mockup

## Layout Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸµ Music Box Composer                    Key: [C Major â–¼]  ğŸ   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ PIANO KEYBOARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  â”Œâ”€â” â”Œâ”€â”   â”Œâ”€â” â”Œâ”€â” â”Œâ”€â”   â”Œâ”€â” â”Œâ”€â”               â”‚            â”‚
â”‚  â”‚  â”‚Câ”‚ â”‚Dâ”‚   â”‚Fâ”‚ â”‚Gâ”‚ â”‚Aâ”‚   â”‚Câ”‚ â”‚Dâ”‚    (Black)    â”‚            â”‚
â”‚  â”‚  â”‚#â”‚ â”‚#â”‚   â”‚#â”‚ â”‚#â”‚ â”‚#â”‚   â”‚#â”‚ â”‚#â”‚               â”‚            â”‚
â”‚  â”‚  â””â”¬â”˜ â””â”¬â”˜   â””â”¬â”˜ â””â”¬â”˜ â””â”¬â”˜   â””â”¬â”˜ â””â”¬â”˜               â”‚            â”‚
â”‚  â”‚ â”Œâ”€â”´â” â”Œâ”´â” â”Œâ”€â”´â” â”Œâ”´â” â”Œâ”´â” â”Œâ”€â”´â” â”Œâ”´â” â”Œâ”€â”´â”           â”‚            â”‚
â”‚  â”‚ â”‚ğŸ”´â”‚ â”‚ğŸŸ¡â”‚ â”‚ğŸ”µâ”‚ â”‚âšªâ”‚ â”‚ğŸŸ§â”‚ â”‚ğŸŸ©â”‚ â”‚ğŸ”´â”‚ â”‚ğŸŸ¡â”‚ (White)  â”‚            â”‚
â”‚  â”‚ â”‚ Câ”‚ â”‚ Dâ”‚ â”‚ Eâ”‚ â”‚ Fâ”‚ â”‚ Gâ”‚ â”‚ Aâ”‚ â”‚ Bâ”‚ â”‚ Câ”‚          â”‚            â”‚
â”‚  â”‚ â””â”€â”€â”˜ â””â”€â”€â”˜ â””â”€â”€â”˜ â””â”€â”€â”˜ â””â”€â”€â”˜ â””â”€â”€â”˜ â””â”€â”€â”˜ â””â”€â”€â”˜          â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ PERCUSSION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚  ğŸ¥ Kick  â”‚  ğŸ¥ Snare  â”‚  ğŸ”” Hat  â”‚  ğŸ‘ Clap  â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         TIMELINE                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Track 1 (High): [ğŸ”´][  ][ğŸŸ¡][ğŸŸ¡][  ][ğŸ”µ][  ][âšª]...             â”‚
â”‚  Track 2 (Low):  [  ][ğŸ”´][  ][  ][ğŸŸ§][  ][ğŸŸ©][  ]...             â”‚
â”‚  Track 3 (Perc): [ğŸ¥][  ][ğŸ¥][  ][ğŸ””][  ][ğŸ‘][  ]...             â”‚
â”‚                  1   2   3   4   5   6   7   8   ...            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â–¶ï¸ Play   â¸ï¸ Pause   ğŸ”„ Reset   ğŸ” Loop   ğŸšï¸ Speed   ğŸ’¾ Share  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Key Selection Dropdown States

### C Major (Default - All White Keys)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Key: C Major â–¼         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ“ C Major              â”‚  â† Selected
â”‚   G Major              â”‚
â”‚   D Major              â”‚
â”‚   A Major              â”‚
â”‚   F Major              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚   A Minor              â”‚
â”‚   E Minor              â”‚
â”‚   D Minor              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚   Freeform (All)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Piano state: C D E F G A B enabled (white keys only)
             C# D# F# G# A# disabled (grayed out)
```

### G Major (One Sharp: F#)
```
Piano state: G A B C D E F# enabled
             C# D# G# A# disabled (grayed out)
```

### A Minor (No Sharps/Flats)
```
Piano state: A B C D E F G enabled
             C# D# F# G# A# disabled (grayed out)
```

### Freeform (All Chromatic)
```
Piano state: ALL 12 notes enabled
             C C# D D# E F F# G G# A A# B all draggable
```

## Visual States

### Enabled Piano Key
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”´    â”‚  â† Full opacity (100%)
â”‚  C     â”‚  â† Bold text
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â† Cursor: grab
            â† Draggable
```

### Disabled Piano Key
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”´    â”‚  â† 50% opacity
â”‚  C     â”‚  â† Gray text
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â† Cursor: not-allowed
            â† Not draggable
            â† Gray overlay filter
```

### Piano Key Being Dragged
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”´    â”‚  â† Ghost/transparent while dragging
â”‚  C     â”‚  â† Follows cursor
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  
```

## Responsive Layout

### Desktop (Wide Screen)
```
Piano: Full octave + repeat C (13 keys visible)
Timeline: 16-24 beats visible at once
Percussion: Horizontal row
```

### Tablet (Medium Screen)
```
Piano: Full octave (12 keys, compact spacing)
Timeline: 12-16 beats visible, horizontal scroll
Percussion: Horizontal row (slightly smaller)
```

### Mobile (Narrow Screen)
```
Piano: Scrollable horizontally, 6-8 keys visible
Timeline: 8 beats visible, horizontal scroll
Percussion: 2Ã—2 grid layout

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸµ] Key:[C Majorâ–¼] â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€ Piano â”€â”€â”€â” â”‚
â”‚ â”‚ [C][D][E][F]â†’   â”‚ â”‚ â† Scroll
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€ Percussion â”€â”€â”€â” â”‚
â”‚ â”‚ [ğŸ¥][ğŸ¥]         â”‚ â”‚
â”‚ â”‚ [ğŸ””][ğŸ‘]         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€ Timeline â”€â”€â”€â” â”‚
â”‚ â”‚ T1: [ğŸ”´][ğŸŸ¡]â†’   â”‚ â”‚ â† Scroll
â”‚ â”‚ T2: [ ][ ]â†’     â”‚ â”‚
â”‚ â”‚ T3: [ğŸ¥][ ]â†’    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ [â–¶ï¸][â¸ï¸][ğŸ”„][ğŸ”]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Color Scheme

### Piano Note Colors (Matching Chromatic Circle)
```
C  = ğŸ”´ Red       (Root)
C# = ğŸŸ  Orange    
D  = ğŸŸ¡ Yellow    
D# = ğŸŸ¢ Green     
E  = ğŸ”µ Blue      
F  = ğŸŸ£ Purple    
F# = ğŸŸ¤ Brown     
G  = âšª White     (Perfect 5th)
G# = ğŸŸ¥ Dark Red  
A  = ğŸŸ§ Orange    
A# = ğŸŸ¨ Light Yellow
B  = ğŸŸ© Light Green
```

### Track Backgrounds
```
Track 1 (High Piano): Light blue background (#E3F2FD)
Track 2 (Low Piano):  Light purple background (#F3E5F5)
Track 3 (Percussion): Light gray background (#F5F5F5)
```

### Key Selection States
```
Enabled key:  Full saturation, white background
Disabled key: Grayscale filter, light gray background
Selected key: Green checkmark indicator
```

## Interaction Flow

### Dragging a Piano Note

1. **Pick up**: User taps/clicks piano key
   ```
   [ğŸ”´ C] â†’ Becomes semi-transparent
   ```

2. **Drag over timeline**: Shows drop indicator
   ```
   Track 1: [  ] â† Drop here (green outline)
   Track 2: [  ] â† Drop here (blue outline)
   Track 3: [  ] â† Not valid (no highlight)
   ```

3. **Drop**: Note appears in timeline
   ```
   Track 1: [ğŸ”´] â† High C (C5)
   Track 2: [ğŸ”´] â† Low C (C3)  (same color, different octave)
   ```

### Changing Musical Key

1. **Click dropdown**: Shows key options
2. **Select key**: Piano updates immediately
   ```
   Before (C Major): C D E F G A B enabled
   After (G Major):  G A B C D E F# enabled (F# now enabled, F disabled)
   ```
3. **Timeline updates**: Notes outside new key are NOT removed (user choice preserved)
4. **Visual indicator**: Status text shows "Key: G Major"

### Extending Note Duration

1. **Click and drag note right**: Extends duration
   ```
   [ğŸ”´] â†’ [ğŸ”´â”€â”€â”€â”€] (2 beats)
   [ğŸ”´] â†’ [ğŸ”´â”€â”€â”€â”€â”€â”€â”€â”€] (3 beats)
   ```

2. **Visual feedback**: Note becomes wider rounded rectangle
3. **Collision detection**: Stops extending if hits another note

## Accessibility Features

### Visual
- High contrast piano keys (white/black clearly distinct)
- Large touch targets (48px minimum)
- Color + icon (not color-only identification)

### Keyboard Navigation
- Tab through piano keys
- Enter/Space to "pick up" note
- Arrow keys to select timeline position
- Enter to drop note

### Screen Reader
- Piano keys: "C note, red, enabled" or "C sharp, disabled"
- Timeline: "Track 1, beat 5, C note, high octave"
- Dropdown: "Key selector, currently C Major"

## Animation Details

### Note Drop Animation
```css
@keyframes note-drop {
    0%   { transform: scale(1.2); opacity: 0.5; }
    50%  { transform: scale(0.9); }
    100% { transform: scale(1); opacity: 1; }
}
/* Duration: 300ms */
```

### Piano Key Press
```css
@keyframes key-press {
    0%   { transform: translateY(0); }
    50%  { transform: translateY(2px); }
    100% { transform: translateY(0); }
}
/* Duration: 150ms */
```

### Disabled Key Gray-out
```css
@keyframes disable-key {
    from { opacity: 1; filter: none; }
    to   { opacity: 0.5; filter: grayscale(100%); }
}
/* Duration: 200ms */
```

## Implementation Notes

### CSS Variables
```css
:root {
    --piano-white-key-width: 48px;
    --piano-white-key-height: 120px;
    --piano-black-key-width: 32px;
    --piano-black-key-height: 80px;
    --piano-key-gap: 2px;
    
    --track-1-color: #E3F2FD;  /* Light blue */
    --track-2-color: #F3E5F5;  /* Light purple */
    --track-3-color: #F5F5F5;  /* Light gray */
    
    --disabled-opacity: 0.5;
    --disabled-filter: grayscale(100%);
}
```

### HTML Structure
```html
<div class="piano-keyboard">
    <div class="piano-key white enabled" data-note="C" data-octave="variable">
        <span class="icon">ğŸ”´</span>
        <span class="label">C</span>
    </div>
    <div class="piano-key black disabled" data-note="C#">
        <span class="icon">ğŸŸ </span>
        <span class="label">C#</span>
    </div>
    <!-- ... more keys ... -->
</div>
```

### Key Selection Logic
```javascript
const KEY_SIGNATURES = {
    'C Major': [0, 2, 4, 5, 7, 9, 11],  // C D E F G A B
    'G Major': [0, 2, 4, 6, 7, 9, 11],  // C D E F# G A B
    // ... etc
};

function updatePianoKeys(keyName) {
    const allowedNotes = KEY_SIGNATURES[keyName];
    pianoKeys.forEach((key, index) => {
        if (allowedNotes.includes(index)) {
            key.classList.remove('disabled');
            key.draggable = true;
        } else {
            key.classList.add('disabled');
            key.draggable = false;
        }
    });
}
```
